# üßÆ MATH4CHILD - CONFIGURATION MA√éTRE (√âtat Valid√©)

> **Document de r√©f√©rence central** - Mise √† jour : 29 Juillet 2025, 13:30
> 
> **‚ö†Ô∏è IMPORTANT** : Ce document contient l'√©tat exact et valid√© de l'application Math4Child. Toute modification doit √™tre report√©e ici.

## üîÑ **POLITIQUE DE GESTION CACHE (CRITIQUE)**

> **üö® OBLIGATOIRE** : Cette proc√©dure DOIT √™tre appliqu√©e avant toute modification de fichier

### Proc√©dure Standard de D√©veloppement
```bash
# 1. TOUJOURS nettoyer le cache avant modification
cd apps/math4child
rm -rf .next node_modules/.cache out dist .swc

# 2. Red√©marrer avec nouveau port
npm run dev -- -p $(shuf -i 3000-3010 -n 1)

# 3. Navigateur : mode incognito ou force reload (Cmd+Shift+R)
```

### Script de Nettoyage Automatique
```bash
#!/bin/bash
# clear-cache.sh - √Ä cr√©er dans le projet
pkill -f "next dev" 2>/dev/null || true
rm -rf .next node_modules/.cache out dist .swc
NEW_PORT=$(shuf -i 3000-3010 -n 1)
echo "üöÄ Red√©marrage sur port $NEW_PORT"
npm run dev -- -p $NEW_PORT
```

### Validation des Changements
- ‚úÖ Fichiers modifi√©s : `head -5 src/app/page.tsx`
- ‚úÖ Serveur compile : V√©rifier logs
- ‚úÖ Navigateur mis √† jour : Mode incognito + force reload
- ‚úÖ Tests multi-navigateurs si n√©cessaire

---

## üéØ **INFORMATIONS G√âN√âRALES**

### Identit√© Projet
- **Nom** : Math4Child
- **Soci√©t√©** : GOTEST (SIRET: 53958712100028)
- **Contact** : khalid_ksouri@yahoo.fr
- **ID App** : com.gotest.math4child
- **Logo** : M4C (d√©grad√© orange-rouge)

### Objectif
Application √©ducative r√©volutionnaire pour l'apprentissage des math√©matiques chez les enfants de **4 √† 12 ans** (Maternelle ‚Üí CM2).

## üèóÔ∏è **ARCHITECTURE TECHNIQUE VALID√âE**

### Technologies
- **Framework** : Next.js 14.0.4 (App Router)
- **Language** : TypeScript
- **Styling** : TailwindCSS + CSS modules
- **Tests** : Playwright
- **Mobile** : Capacitor (iOS/Android)
- **D√©ploiement** : Vercel (web) + App Stores

### Structure R√©pertoires
```
apps/math4child/
‚îú‚îÄ‚îÄ clear-cache.sh               üÜï AJOUT√â - Script nettoyage cache
‚îú‚îÄ‚îÄ dev-safe.sh                  üÜï AJOUT√â - D√©veloppement s√©curis√©
‚îú‚îÄ‚îÄ validate-changes.sh          üÜï AJOUT√â - Validation modifications
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx           ‚úÖ VALID√â - Navigation int√©gr√©e
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx             üîÑ EN COURS - Mise √† jour niveaux 4-12 ans
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exercises/page.tsx   ‚úÖ VALID√â - 5 niveaux (4-12 ans)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription/page.tsx ‚úÖ VALID√â - 4 plans + √âcoles
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/page.tsx   ‚úÖ VALID√â - Statistiques compl√®tes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css          ‚úÖ VALID√â - TailwindCSS + RTL
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ navigation/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Navigation.tsx   ‚úÖ VALID√â - Responsive + multilingue
‚îÇ   ‚îî‚îÄ‚îÄ contexts/
‚îÇ       ‚îî‚îÄ‚îÄ LanguageContext.tsx  ‚úÖ VALID√â - 6 langues + RTL
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ navigation.spec.ts       ‚úÖ VALID√â - Tests Playwright
‚îú‚îÄ‚îÄ package.json                 ‚úÖ VALID√â - Scripts complets
‚îú‚îÄ‚îÄ tailwind.config.js           ‚úÖ VALID√â - Configuration TailwindCSS
‚îú‚îÄ‚îÄ playwright.config.ts         ‚úÖ VALID√â - Tests automatis√©s
‚îî‚îÄ‚îÄ next.config.js               ‚úÖ VALID√â - Export statique
```

## üß≠ **NAVIGATION UNIFI√âE (VALID√âE)**

### Header Fixe
- **Logo** : M4C (orange-rouge, hover scale)
- **Titre** : "Math4Child" + badge "100k+ familles"
- **Menu Desktop** : Accueil, Exercices, Abonnement, Tableau de bord
- **Menu Mobile** : Hamburger avec m√™me contenu
- **Langues** : Dropdown avec 6 langues + RTL

### Pages Accessibles
1. **üè† Accueil** (`/`) - Pr√©sentation + s√©lecteur √¢ge (5 niveaux)
2. **üßÆ Exercices** (`/exercises`) - 5 niveaux + 4 op√©rations
3. **üíé Abonnement** (`/subscription`) - 4 plans tarifaires
4. **üìä Tableau de bord** (`/dashboard`) - Statistiques et suivi

### Footer
- Informations Math4Child
- Liens : Confidentialit√©, Conditions, Contact, Aide
- Copyright 2024 + "100k+ familles font confiance"

## üåç **SYST√àME MULTILINGUE (VALID√â)**

### Langues Support√©es
1. **üá´üá∑ Fran√ßais** (par d√©faut)
2. **üá∫üá∏ English**
3. **üá™üá∏ Espa√±ol**
4. **üá≤üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©** (RTL complet)
5. **üá©üá™ Deutsch**
6. **üáÆüáπ Italiano**

### Fonctionnalit√©s
- ‚úÖ **Persistance** : localStorage ('math4child-language')
- ‚úÖ **RTL** : Direction automatique pour l'arabe
- ‚úÖ **Responsive** : Dropdown adaptatif
- ‚úÖ **Navigation** : Traductions compl√®tes du menu

## üéÆ **SYST√àME D'EXERCICES (VALID√â)**

### 5 Niveaux pour 4-12 ans (SPECIFICATION CRITIQUE)
1. **üå± Niveau 1** (4-5 ans) - Premiers nombres (1-10)
2. **üåø Niveau 2** (6-7 ans) - Nombres jusqu'√† 20
3. **üå≥ Niveau 3** (8-9 ans) - Nombres jusqu'√† 100
4. **üèîÔ∏è Niveau 4** (10-11 ans) - Nombres jusqu'√† 1000
5. **üöÄ Niveau 5** (12+ ans) - Nombres avanc√©s

> **‚ö†Ô∏è IMPORTANT** : Pas de mention "Maternelle", "Primaire", "Coll√®ge", "Lyc√©e" - Seulement "Niveau X (√¢ge)" dans toute l'interface

### 4 Op√©rations
1. **Addition** (+) - 1250 exercices
2. **Soustraction** (-) - 980 exercices
3. **Multiplication** (√ó) - 870 exercices
4. **Division** (√∑) - 640 exercices

### Fonctionnalit√©s
- ‚úÖ **G√©n√©rateur automatique** selon niveau/op√©ration
- ‚úÖ **Syst√®me de score** (10 points par bonne r√©ponse)
- ‚úÖ **Feedback imm√©diat** avec √©mojis
- ‚úÖ **Progression** : pas de n√©gatifs, divisions exactes

## üíé **SYST√àME D'ABONNEMENT (VALID√â)**

### 4 Plans Tarifaires
1. **D√©couverte** (0‚Ç¨) - 5 exercices/jour, support email
2. **Premium** (9.99‚Ç¨/mois) - Illimit√© + toutes fonctionnalit√©s
3. **Famille** (19.99‚Ç¨/mois) - Jusqu'√† 6 profils enfants
4. **√âcoles & Associations** (49.99‚Ç¨/mois) - Comptes illimit√©s + gestion classe

### Fonctionnalit√©s
- ‚úÖ **Toggle mensuel/annuel** avec 20% d'√©conomie
- ‚úÖ **Plan populaire** mis en avant (Premium)
- ‚úÖ **Section d√©di√©e** institutions √©ducatives
- ‚úÖ **Essai gratuit** 7 jours pour plans payants

## üìä **TABLEAU DE BORD (VALID√â)**

### Statistiques Principales
- **Exercices compl√©t√©s** : 156
- **R√©ponses correctes** : 134  
- **S√©rie actuelle** : 7 jours
- **Temps total** : 240 minutes
- **Pr√©cision globale** : 86% (graphique circulaire)
- **Niveau actuel** : Interm√©diaire

### Fonctionnalit√©s
- ‚úÖ **Activit√© r√©cente** : tableau avec dates/op√©rations/performances
- ‚úÖ **Graphiques** : pr√©cision en cercle, progression visuelle
- ‚úÖ **Couleurs adapt√©es** : vert (bon), orange (moyen), rouge (faible)

## üß™ **TESTS ET QUALIT√â (VALID√âS)**

### Tests Playwright
- **Navigation** : Liens, langues, responsive
- **Exercices** : S√©lection niveaux/op√©rations
- **Abonnement** : Plans, toggle pricing
- **Accessibilit√©** : Focus, ARIA, hi√©rarchie titres

### Scripts Disponibles
```bash
npm run dev                    # Serveur d√©veloppement
npm run dev:clean              # D√©veloppement avec cache nettoy√©
npm run test:navigation        # Tests navigation
npm run test:navigation:ui     # Interface tests
./test-navigation.sh           # Test rapide
./clear-cache.sh               # Nettoyage cache
```

## üé® **DESIGN SYSTEM (VALID√â)**

### Couleurs Principales
- **Primary** : #3b82f6 (bleu)
- **Secondary** : #8b5cf6 (violet)  
- **Success** : #10b981 (vert)
- **Warning** : #f59e0b (orange)
- **Error** : #ef4444 (rouge)
- **Brand** : D√©grad√© orange-rouge pour logo

### Composants
- **Boutons** : .btn-primary, .btn-secondary avec hover effects
- **Cartes** : .card avec shadow et hover lift
- **Navigation** : Header fixe avec backdrop-blur
- **Responsive** : Breakpoints TailwindCSS standard

## üîß **CONFIGURATION TECHNIQUE**

### Package.json (Scripts Mis √† Jour)
```json
{
  "scripts": {
    "dev": "next dev -p 3000",
    "dev:clean": "./clear-cache.sh",
    "dev:safe": "./dev-safe.sh",
    "build": "next build",
    "test:navigation": "playwright test tests/navigation.spec.ts",
    "test:navigation:ui": "playwright test tests/navigation.spec.ts --ui",
    "validate": "./validate-changes.sh"
  }
}
```

### Next.js Config
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
}
module.exports = nextConfig
```

### TailwindCSS Config
```javascript
module.exports = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: { extend: {} },
  plugins: [],
}
```

## ‚ö° **√âTAT ACTUEL ET PROBL√àMES R√âSOLUS**

### ‚úÖ Fonctionnalit√©s Valid√©es
- [x] Navigation responsive avec header fixe
- [x] Syst√®me multilingue (6 langues + RTL)
- [x] Exercices math√©matiques (5 niveaux, 4 op√©rations)
- [x] Plans d'abonnement (4 formules)
- [x] Tableau de bord avec statistiques
- [x] Tests automatis√©s Playwright
- [x] Layout sans chevauchement header/footer
- [x] Politique de gestion cache int√©gr√©e

### üîÑ En Cours de R√©solution
- [ ] **Page d'accueil** : Mise √† jour pour afficher niveaux 4-12 ans (sans mentions scolaires)
- [ ] **Cache management** : Application de la nouvelle politique

### üîß Derni√®res Corrections Appliqu√©es
1. **Layout Fix** : Header fixe avec `pt-20` sur main
2. **Cache Policy** : Politique de nettoyage obligatoire cr√©√©e
3. **Niveaux** : Sp√©cification claire 5 niveaux (Niv1-Niv5) pour √¢ges 4-12 ans
4. **Scripts** : Ajout scripts de nettoyage et validation

### üöÄ Commandes de D√©veloppement (MISE √Ä JOUR)
```bash
# NOUVELLE PROC√âDURE OBLIGATOIRE
./clear-cache.sh               # Nettoie tout et red√©marre
npm run dev:clean              # Alias du script ci-dessus

# Validation des changements
./validate-changes.sh          # V√©rifie que les modifs sont effectives

# D√©veloppement s√©curis√©
./dev-safe.sh                  # Lance en mode incognito automatiquement
```

## üì± **STATUT FONCTIONNEL ACTUEL**

### Ce qui marche parfaitement ‚úÖ
- **Header Navigation** : Logo M4C, menu, langues
- **Pages** : Exercices, Abonnement, Dashboard accessibles et fonctionnelles
- **Responsive** : Desktop + mobile
- **Multilingue** : 6 langues avec persistance
- **Exercices** : G√©n√©ration dynamique selon niveau
- **Layout** : Header fixe + footer correct

### üîÑ En attente de validation (Cache)
- **Page d'accueil** : Modifications en cours (probl√®me cache)
- **Interface coh√©rente** : Mise √† jour selon sp√©cifications 4-12 ans

### URLs de test √† valider ‚úÖ
- http://localhost:XXXX (Port variable apr√®s nettoyage cache)
- /exercises (Exercices - ‚úÖ Valid√©)
- /subscription (Abonnement - ‚úÖ Valid√©)  
- /dashboard (Tableau de bord - ‚úÖ Valid√©)

---

## üéØ **CHECKLIST D√âVELOPPEMENT (MISE √Ä JOUR)**

### Avant toute modification (OBLIGATOIRE)
- [ ] Ex√©cuter `./clear-cache.sh`
- [ ] V√©rifier nouveau port dans les logs
- [ ] Ouvrir en mode incognito
- [ ] Valider que l'environnement est propre

### Apr√®s modification
- [ ] Ex√©cuter `./validate-changes.sh`
- [ ] V√©rifier compilation r√©ussie
- [ ] Tester dans navigateur (force reload)
- [ ] Valider sur desktop ET mobile
- [ ] Mettre √† jour ce document si besoin

### Avant d√©ploiement
- [ ] Build successful avec cache propre
- [ ] Tests passent
- [ ] Performance optimis√©e
- [ ] Accessibilit√© valid√©e
- [ ] Tous niveaux 4-12 ans corrects (pas de mentions scolaires)

---

## üÜï **SCRIPTS √Ä CR√âER DANS LE PROJET**

### 1. clear-cache.sh
```bash
#!/bin/bash
pkill -f "next dev" 2>/dev/null || true
rm -rf .next node_modules/.cache out dist .swc
NEW_PORT=$(shuf -i 3000-3010 -n 1)
echo "üöÄ Red√©marrage sur port $NEW_PORT"
npm run dev -- -p $NEW_PORT
```

### 2. dev-safe.sh  
```bash
#!/bin/bash
./clear-cache.sh &
sleep 3
if [[ "$OSTYPE" == "darwin"* ]]; then
    open -na "Google Chrome" --args --incognito "http://localhost:3001"
fi
```

### 3. validate-changes.sh
```bash
#!/bin/bash
echo "üìÖ Derni√®res modifications :"
ls -la src/app/page.tsx src/app/layout.tsx
echo "üìÑ Contenu page.tsx :"
head -3 src/app/page.tsx
```

---

**üìÖ Derni√®re mise √† jour** : 29 Juillet 2025, 13:30
**üë®‚Äçüíª Statut** : üîÑ CACHE POLICY INT√âGR√âE
**üöÄ Prochaine √©tape** : Application politique cache + validation page d'accueil
**üéØ Priorit√©** : R√©soudre affichage page d'accueil avec niveaux 4-12 ans